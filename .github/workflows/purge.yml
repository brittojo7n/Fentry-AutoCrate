name: Purge Old Workflow Runs

on:
  # Run automatically every day at midnight UTC (5:30 AM IST)
  schedule:
    - cron: '0 0 * * *'

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  delete-old-runs:
    # Use a standard GitHub-hosted runner to ensure network connectivity
    runs-on: ubuntu-latest

    # Grant the GITHUB_TOKEN permissions to delete workflow runs
    permissions:
      actions: write

    steps:
      - name: Delete old workflow runs
        uses: matt-ball/delete-old-workflow-runs@v2
        with:
          # Authenticate the action to allow it to modify your repository
          token: ${{ secrets.GITHUB_TOKEN }}

          # Keep workflow runs from the last 1 day
          retain_days: 1
